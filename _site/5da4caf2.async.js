(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{1333:function(s,t,a){"use strict";a.r(t);var r=function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("div",[a("h1",[s._v("ArcGis")]),s._v(" "),a("p",[s._v("如果你的卡片有ArcGis场景.")]),s._v(" "),s._m(0),s._v(" "),a("p",[s._v("业务平台中ArcGis相关的依赖卡片或模块不需要关心,平台已经全局管理,只关注有需要用到的时候使用即可.")]),s._v(" "),s._m(1),s._v(" "),s._m(2),s._v(" "),s._m(3),s._v(" "),s._m(4),s._v(" "),s._m(5),s._v(" "),a("p",[s._v("了解生命周期会大大有助于你理解gis地图与卡片加载的时序关系,让你的恰当的时机销毁与gis地图之间的通信联系.")]),s._v(" "),a("img",{attrs:{src:"https://e.im5i.com/2020/12/22/1a10a1956f30faecdb387e77294ea84f.png",alt:"1a10a1956f30faecdb387e77294ea84f.png",border:"0"}}),s._v(" "),s._m(6),s._v(" "),s._m(7),s._v(" "),s._m(8),s._v(" "),s._m(9),s._v(" "),s._m(10),s._v(" "),s._m(11),s._v(" "),a("ul",[s._m(12),s._v(" "),a("li",[s._v("绑定事件\n"),a("ul",[a("li",[s._v("arcgisApi绑定事件的返回值需要保存,因为在恰当的时机需要解绑监听,如果不这样做,会因为卡片造成内存泄露导致卡片"),a("font",{attrs:{color:"red"}},[s._v("审核失败")]),s._m(13)],1)])])]),s._v(" "),s._m(14),s._v(" "),s._m(15),s._v(" "),s._m(16),s._v(" "),s._m(17),s._v(" "),s._m(18),s._v(" "),s._m(19),s._v(" "),s._m(20),s._v(" "),s._m(21),s._v(" "),s._m(22),s._v(" "),s._m(23),s._v(" "),s._m(24),s._v(" "),s._m(25),s._v(" "),s._m(26),s._v(" "),s._m(27),s._v(" "),s._m(28),s._v(" "),s._m(29),s._v(" "),s._m(30),s._v(" "),s._m(31),s._v(" "),s._m(32),s._v(" "),s._m(33),s._v(" "),s._m(34),s._v(" "),s._m(35),s._v(" "),s._m(36),s._v(" "),s._m(37),s._v(" "),s._m(38),s._v(" "),s._m(39),s._v(" "),s._m(40),s._v(" "),a("p",[s._v("FeatureLayer 要素图层服务，可通过前端对样式在修改")]),s._v(" "),s._m(41),s._v(" "),s._m(42),s._v(" "),s._m(43),s._v(" "),s._m(44),s._v(" "),s._m(45),s._v(" "),a("p",[s._v("MapImageLayer 即切片图层服务，加载速度更快")]),s._v(" "),s._m(46),s._v(" "),s._m(47),s._v(" "),a("p",[s._v("GraphicsLayer 即图形图层，可由前端自定义绘制点、线、面")]),s._v(" "),s._m(48),s._v(" "),s._m(49),s._v(" "),s._m(50),s._v(" "),s._m(51),s._v(" "),s._m(52),s._v(" "),s._m(53),s._v(" "),s._m(54),s._v(" "),s._m(55),s._v(" "),s._m(56),s._v(" "),s._m(57),s._v(" "),s._m(58),s._v(" "),s._m(59)])};r._withStripped=!0;var e=a(50),n=Object(e.a)({},r,[function(){var s=this.$createElement,t=this._self._c||s;return t("h2",{attrs:{id:"场景说明"}},[this._v("场景说明 "),t("a",{staticClass:"anchor",attrs:{href:"#场景说明"}},[this._v("#")])])},function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("blockquote",[a("p",[s._v("在开始之前，推荐先学习 "),a("a",{attrs:{href:"https://developers.arcgis.com/javascript/latest/api-reference/"}},[s._v("ArcGis JavaScriptAPI Version 4.17")]),s._v(" 因为本文档不会详述ArcGis JavaScriptAPI如何使用,我们主要讨论如何在门户中使用."),a("br"),s._v(" "),a("a",{attrs:{href:"http://gxpt.jxsl.gov.cn/#/space"}},[s._v("江西省水利数据共享系统")]),s._v(",里面的"),a("a",{attrs:{href:"http://gxpt.jxsl.gov.cn/#/data"}},[s._v("数据")]),s._v("与"),a("a",{attrs:{href:"http://gxpt.jxsl.gov.cn/#/space"}},[s._v("地图")]),s._v("在大部分场景下都可以直接使用,可以大大降低你的开发工作量与复杂度"),a("br")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("h2",{attrs:{id:"gis实例"}},[this._v("gis实例 "),t("a",{staticClass:"anchor",attrs:{href:"#gis实例"}},[this._v("#")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("p",[t("img",{attrs:{src:"https://e.im5i.com/2020/12/22/gis1.jpg",alt:"gis1.jpg"}})])},function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ul",[a("li",[s._v("卡片组件获取gis实例"),a("pre",{pre:!0},[a("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[a("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//...")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("computed")]),s._v(": {\n  ...mapGetters({\n    "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("gisView")]),s._v(": "),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'gisView'")]),s._v(",\n    "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("gisMap")]),s._v(": "),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'gisMap'")]),s._v("\n  })\n"),a("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//...")]),s._v("\n")])])])])},function(){var s=this.$createElement,t=this._self._c||s;return t("h2",{attrs:{id:"生命周期管理"}},[this._v("生命周期管理 "),t("a",{staticClass:"anchor",attrs:{href:"#生命周期管理"}},[this._v("#")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("h2",{attrs:{id:"gisApi"}},[this._v("gisApi "),t("a",{staticClass:"anchor",attrs:{href:"#gisApi"}},[this._v("#")])])},function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("p",[s._v("由于ArcGisJSApi使用"),a("code",{pre:!0},[s._v("dojo")]),s._v("框架编写而成,"),a("code",{pre:!0},[s._v("dojo")]),s._v("有自己的"),a("code",{pre:!0},[s._v("AMD loader")]),s._v(",按照官方推荐,我们使用"),a("code",{pre:!0},[s._v("loadModules")]),s._v("来加载api模块")])},function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("pre",{pre:!0},[a("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("import")]),s._v(" { loadModules } "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("from")]),s._v(" "),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'esri-loader'")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//...")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("async")]),s._v(" initGis(){\n    "),a("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 此处解构是按照数组下标位置而不是模块名")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" [esriConfig, MapImageLayer] = "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("await")]),s._v(" loadModules([\n        "),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'esri/config'")]),s._v(", "),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'esri/layers/MapImageLayer'")]),s._v("\n    ])\n}\n")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("h2",{attrs:{id:"gis通信"}},[this._v("gis通信 "),t("a",{staticClass:"anchor",attrs:{href:"#gis通信"}},[this._v("#")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("h3",{attrs:{id:"卡片向gis发送数据"}},[this._v("卡片向gis发送数据 "),t("a",{staticClass:"anchor",attrs:{href:"#卡片向gis发送数据"}},[this._v("#")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("blockquote",[t("p",[this._v("如有其它情况 欢迎补充")])])},function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("li",[s._v("添加图层\n"),a("ul",[a("li",[s._v("添加图层"),a("strong",[s._v("必须")]),s._v("设置图层id,使用有id的图层会让后续针对gis的操作更具准确性"),a("pre",{pre:!0},[a("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" LAYERID = "),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'JhRainCardSK'")]),s._v(";\n"),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" flURL = "),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'http://gxpt.jxsl.gov.cn/arcgis/rest/services/UNN_FAC_INFA/Feature_UNN_FAC_INFA_ST/FeatureServer'")]),s._v(";\n"),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" fl = "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" FeatureLayer({\n    "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("url")]),s._v(": flURL,\n    "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("id")]),s._v(": LAYERID,\n    "),a("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// ...")]),s._v("\n});\n")])])]),s._v(" "),a("li",[s._v("添加图层之前判断图层是否存在同样很重要,因为可能你发布的多张卡片公用一个图层"),a("pre",{pre:!0},[a("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v(" (map.findLayerById(LAYERID)) "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(";\n")])])])])])},function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("pre",{pre:!0},[a("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[s._v("destroyed () {\n    "),a("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 移除相关图层与监听器")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" map = "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".gisMap\n    "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v(" (map.findLayerById(LAYERID)) {\n        map.remove(map.findLayerById(LAYERID))\n    }\n    "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v(" ("),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".$immediateClick) {\n        "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".$immediateClick.remove()\n        "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".$immediateClick = "),a("span",{pre:!0,attrs:{class:"hljs-literal"}},[s._v("undefined")]),s._v("\n    }\n}\n")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("h3",{attrs:{id:"gis向卡片通信"}},[this._v("gis向卡片通信 "),t("a",{staticClass:"anchor",attrs:{href:"#gis向卡片通信"}},[this._v("#")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("blockquote",[t("p",[this._v("如有其它情况 欢迎补充")])])},function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ul",[a("li",[s._v("gis广播事件,卡片监听 "),a("small",{staticStyle:{color:"red"}},[s._v("暂未上线")])]),s._v(" "),a("li",[s._v("卡片监听gis地图上已注册的事件."),a("pre",{pre:!0},[a("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[s._v("methods: {\n"),a("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// ...")]),s._v("\n    bindClick(){\n\t\t"),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" view = "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".gisView\n        "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v(" (!"),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".$immediateClick) { "),a("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 防止重复监听")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".$immediateClick = view.on("),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'immediate-click'")]),s._v(", event => {\n            view.hitTest(event).then("),a("span",{pre:!0,attrs:{class:"hljs-function"}},[a("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("e")]),s._v(" =>")]),s._v(" {\n                "),a("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 通过点击事件拿到 目标ID 图层上graphic上的attributes")]),s._v("\n                "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" { attributes } = e.results.map("),a("span",{pre:!0,attrs:{class:"hljs-function"}},[s._v("("),a("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("{ graphic }")]),s._v(") =>")]),s._v(" graphic).find("),a("span",{pre:!0,attrs:{class:"hljs-function"}},[a("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("graphic")]),s._v(" =>")]),s._v(" {\n                    "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" graphic && graphic.layer && graphic.layer.id === LAYERID\n                })\n                "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v(" (attributes) { "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".doSomeThing(attributes) } "),a("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 处理相关业务")]),s._v("\n                })\n            })\n        }\n    }\n"),a("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// ...")]),s._v("\n}\n")])])])])},function(){var s=this.$createElement,t=this._self._c||s;return t("h2",{attrs:{id:"gis常用方法"}},[this._v("gis常用方法 "),t("a",{staticClass:"anchor",attrs:{href:"#gis常用方法"}},[this._v("#")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("h3",{attrs:{id:"绑定地图事件"}},[this._v("绑定地图事件 "),t("a",{staticClass:"anchor",attrs:{href:"#绑定地图事件"}},[this._v("#")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("ol",[t("li",[this._v("地图点击")])])},function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("pre",{pre:!0},[a("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[s._v("view.on("),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'click'")]),s._v(", (event) => { \n  "),a("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 获取点击经纬度，屏幕坐标信息")]),s._v("\n  view.hitTest(event).then("),a("span",{pre:!0,attrs:{class:"hljs-function"}},[a("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("res")]),s._v(" =>")]),s._v(" {\n    "),a("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 获取自己绘制点或者FeatureLayer图层上的点")]),s._v("\n  })\n})\n")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("ol",{attrs:{start:"2"}},[t("li",[this._v("监听图层缩放")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[this._v("view.watch("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[this._v("'scale'")]),this._v(", () => { \n})\n")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("h3",{attrs:{id:"跳转视图"}},[this._v("跳转视图 "),t("a",{staticClass:"anchor",attrs:{href:"#跳转视图"}},[this._v("#")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("ol",[t("li",[this._v("跳转到一个点")])])},function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("pre",{pre:!0},[a("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" [ Point ] = "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("await")]),s._v(" loadModules(["),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'esri/geometry/Point'")]),s._v("])\n"),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" center = "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" Point({\n  "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("x")]),s._v(": "),a("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("116")]),s._v(",\n  "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("y")]),s._v(": "),a("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("27")]),s._v(",\n  "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("spatialReference")]),s._v(": {\n    "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("wkid")]),s._v(": "),a("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("4490")]),s._v("\n  }\n})\nview.goTo({\n  "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("zoom")]),s._v(": "),a("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("2")]),s._v(",\n  "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("center")]),s._v(": center\n})\n")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("ol",{attrs:{start:"2"}},[t("li",[this._v("跳转到一个范围")])])},function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("pre",{pre:!0},[a("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[s._v("view.goTo(data.geometry.extent, {\n  "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("speedFactor")]),s._v(": "),a("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0.6")]),s._v(",\n  "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("duration")]),s._v(": "),a("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1500")]),s._v("\n});\n")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("h3",{attrs:{id:"加载字体和共享平台code"}},[this._v("加载字体和共享平台code "),t("a",{staticClass:"anchor",attrs:{href:"#加载字体和共享平台code"}},[this._v("#")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("ol",[t("li",[this._v("字体指向地址")])])},function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("pre",{pre:!0},[a("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" [ esriConfig ] = "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("await")]),s._v(" loadModules(["),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'esri/config'")]),s._v("])\nesriConfig.fontsUrl = "),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("`"),a("span",{pre:!0,attrs:{class:"hljs-subst"}},[s._v("${GisBaseUrl}")]),s._v("/arcgis_js_api/library/4.16/fonts`")]),s._v("\n")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("ol",{attrs:{start:"2"}},[t("li",[this._v("共享平台添加code")])])},function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("pre",{pre:!0},[a("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" mapUrl = "),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'http://gxpt.jxsl.gov.cn/arcgis/rest/services/basemap/JXVectorBasemap/MapServer'")]),s._v("\nesriConfig.request.interceptors.push({\n  "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("urls")]),s._v(": mapUrl,\n  "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("before")]),s._v(": "),a("span",{pre:!0,attrs:{class:"hljs-function"}},[a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v(" ("),a("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("params")]),s._v(") ")]),s._v("{\n    "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v(" (params.requestOptions.query) {\n      params.requestOptions.query.code = "),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'5b8dcae8332ee4f2d93db7e9f483ddaa1'")]),s._v("\n    } "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("else")]),s._v(" "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v(" (params.requestOptions) {\n      params.url += "),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'&code='")]),s._v(" + "),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'5b8dcae8332ee4f2d93db7e9f483ddaa1'")]),s._v("\n    }\n  }\n})\n")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("h3",{attrs:{id:"弹框"}},[this._v("弹框 "),t("a",{staticClass:"anchor",attrs:{href:"#弹框"}},[this._v("#")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("ol",[t("li",[this._v("创建弹框")])])},function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("pre",{pre:!0},[a("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[s._v("view.popup.open({\n  "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("actions")]),s._v(": [],\n  "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("title")]),s._v(": "),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("\"<div class='bs-headline'><img src='/bs_11.png'>\"")]),s._v(" + data.cwsName + "),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"</div>"')]),s._v(",\n  "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("location")]),s._v(": etry,\n  "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("content")]),s._v(": "),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("\"<div class='bs-lading'>加载中...</div>\"")]),s._v("\n});\n")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("ol",{attrs:{start:"2"}},[t("li",[this._v("更新弹框")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[this._v("view.popup.content = "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[this._v("\"<div class='bs-popup'></div>\"")]),this._v(" "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[this._v("// 跟新弹框内容")]),this._v("\n")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("ol",{attrs:{start:"3"}},[t("li",[this._v("关闭弹框")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[this._v("view.popup.close()\n")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("h3",{attrs:{id:"FeatureLayer-要素图层"}},[this._v("FeatureLayer 要素图层 "),t("a",{staticClass:"anchor",attrs:{href:"#FeatureLayer-要素图层"}},[this._v("#")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("ol",[t("li",[this._v("创建要素及模版信息")])])},function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("pre",{pre:!0},[a("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" hwySym = {\n  "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("type")]),s._v(": "),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'simple-marker'")]),s._v(",\n  "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("size")]),s._v(": "),a("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("8")]),s._v(",\n  "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("color")]),s._v(": ["),a("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("51")]),s._v(", "),a("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("41")]),s._v(", "),a("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0")]),s._v(", "),a("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0.6")]),s._v("],\n  "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("outline")]),s._v(": { "),a("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// autocasts as new SimpleLineSymbol()")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("width")]),s._v(": "),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'2px'")]),s._v(",\n    "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("color")]),s._v(": "),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'white'")]),s._v("\n  }\n}\n"),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" hwsSym = {\n  "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("type")]),s._v(": "),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'simple-marker'")]),s._v(",\n  "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("size")]),s._v(": "),a("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("8")]),s._v(",\n  "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("color")]),s._v(": ["),a("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("23")]),s._v(", "),a("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("207")]),s._v(", "),a("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("121")]),s._v(", "),a("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0.6")]),s._v("],\n  "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("outline")]),s._v(": { "),a("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// autocasts as new SimpleLineSymbol()")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("width")]),s._v(": "),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'2px'")]),s._v(",\n    "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("color")]),s._v(": "),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'white'")]),s._v("\n  }\n}\n"),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" otherSym = {\n  "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("type")]),s._v(": "),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'simple-marker'")]),s._v(",\n  "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("size")]),s._v(": "),a("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("8")]),s._v(",\n  "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("color")]),s._v(": ["),a("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("240")]),s._v(", "),a("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("36")]),s._v(", "),a("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0")]),s._v(", "),a("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0.6")]),s._v("],\n  "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("outline")]),s._v(": { "),a("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// autocasts as new SimpleLineSymbol()")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("width")]),s._v(": "),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'2px'")]),s._v(",\n    "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("color")]),s._v(": "),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'white'")]),s._v("\n  }\n}\n"),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" template = { "),a("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 模板")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("title")]),s._v(": "),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'{SSQ}/{NAME}'")]),s._v(",\n  "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("content")]),s._v(": [{\n    "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("type")]),s._v(": "),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'fields'")]),s._v(",\n    "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("fieldInfos")]),s._v(": [\n      { "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("fieldName")]),s._v(": "),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'SSQ'")]),s._v(", "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("label")]),s._v(": "),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'市级'")]),s._v(" }\n    ]\n  }]\n}\n"),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" renderer = {\n  "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("type")]),s._v(": "),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'unique-value'")]),s._v(", "),a("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// autocasts as new UniqueValueRenderer()")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("field")]),s._v(": "),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'SFYWCZZ'")]),s._v(", "),a("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 查询字段")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("defaultSymbol")]),s._v(": otherSym,\n  "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("defaultLabel")]),s._v(": "),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'未标注状态'")]),s._v(",\n  "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("legendOptions")]),s._v(": "),a("span",{pre:!0,attrs:{class:"hljs-literal"}},[s._v("false")]),s._v(",\n  "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("uniqueValueInfos")]),s._v(": [{\n    "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("value")]),s._v(": "),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'是'")]),s._v(", "),a("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 表字段的值")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("symbol")]),s._v(": hwsSym,\n    "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("label")]),s._v(": "),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'已整治'")]),s._v("\n  },\n    {\n      "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("value")]),s._v(": "),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'否'")]),s._v(",\n      "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("symbol")]),s._v(": hwySym,\n      "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("label")]),s._v(": "),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'未整治'")]),s._v("\n    }]\n}\n")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("ol",{attrs:{start:"2"}},[t("li",[this._v("添加图层")])])},function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("pre",{pre:!0},[a("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" [ FeatureLayer ] = "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("await")]),s._v(" loadModules(["),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'esri/layers/FeatureLayer'")]),s._v("])\n"),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" feature = "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" FeatureLayer({\n  "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("url")]),s._v(": "),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("`"),a("span",{pre:!0,attrs:{class:"hljs-subst"}},[s._v("${GisBaseUrl}")]),s._v("/arcgis/rest/services/XXXXX`")]),s._v(", "),a("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 图层服务地址")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("id")]),s._v(": "),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'XXXXXXXX'")]),s._v(", "),a("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 图层唯一标识必须添加")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("popupTemplate")]),s._v(": template, "),a("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// gis官方弹框")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("outFields")]),s._v(": ["),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'*'")]),s._v("], "),a("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 显示所有字段")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("renderer")]),s._v(": renderer "),a("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 前端重置样式")]),s._v("\n})\n"),a("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 加载图层，第二个参数图层顺序")]),s._v("\nmap.add(feature, "),a("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1")]),s._v(")\n"),a("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 图层按搜索条件显示要素，查询语句是数据库查询语句")]),s._v("\nfeature.definitionExpression = "),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("\"ID='XXXX'\"")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 查询语句")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" rings = [["),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'21.3242'")]),s._v(", "),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'123.34532'")]),s._v("], ["),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'21.3242'")]),s._v(", "),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'123.34532'")]),s._v("], ["),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'21.3242'")]),s._v(", "),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'123.34532'")]),s._v("], ["),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'21.3242'")]),s._v(", "),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'123.34532'")]),s._v("]]\nfeature.queryFeatures({\n  "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("where")]),s._v(": "),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'1=1'")]),s._v(", "),a("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 字段查询数据库查询语句,'1=1'查询所有数据")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("geometry")]),s._v(": { "),a("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 空间数据")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("rings")]),s._v(": rings,\n    "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("spatialReference")]),s._v(": view.spatialReference,\n    "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("type")]),s._v(": "),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'polygon'")]),s._v(",\n    "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("outFields")]),s._v(": ["),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'*'")]),s._v("] "),a("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 查询后返回的字段，*代表所有字段")]),s._v("\n  }\n}).then("),a("span",{pre:!0,attrs:{class:"hljs-function"}},[a("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("res")]),s._v(" =>")]),s._v(" {})\n")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("h3",{attrs:{id:"MapImageLayer-切片图层"}},[this._v("MapImageLayer 切片图层 "),t("a",{staticClass:"anchor",attrs:{href:"#MapImageLayer-切片图层"}},[this._v("#")])])},function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("pre",{pre:!0},[a("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" [ MapImageLayer ] = "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("await")]),s._v(" loadModules(["),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'esri/layers/MapImageLayer'")]),s._v("])\n"),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" imageLayer = "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" MapImageLayer({\n  "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("url")]),s._v(": "),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("`"),a("span",{pre:!0,attrs:{class:"hljs-subst"}},[s._v("${GisBaseUrl}")]),s._v("/arcgis/rest/services/XXXXX`")]),s._v(",\n  "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("id")]),s._v(": "),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'XXXXXXXX'")]),s._v("\n})\nmap.add(imageLayer, "),a("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("2")]),s._v(")\n")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("h3",{attrs:{id:"GraphicsLayer-图形图层"}},[this._v("GraphicsLayer 图形图层 "),t("a",{staticClass:"anchor",attrs:{href:"#GraphicsLayer-图形图层"}},[this._v("#")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("ol",[t("li",[this._v("加载GraphicsLayer图层")])])},function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("pre",{pre:!0},[a("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" [GraphicsLayer] = "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("await")]),s._v(" loadModules(["),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'esri/layers/GraphicsLayer'")]),s._v("])\n"),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" graphicsLayers = "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" GraphicsLayer({\n  "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("id")]),s._v(": "),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'XXXXXX'")]),s._v("\n})\nmap.add(graphicsLayers, "),a("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("3")]),s._v(")\n"),a("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 清除图层上所有绘制的数据")]),s._v("\ngraphicsLayers.graphics.removeAll()\n")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("ol",{attrs:{start:"2"}},[t("li",[this._v("绘制点")])])},function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("pre",{pre:!0},[a("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" [Graphic] = "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("await")]),s._v(" loadModules(["),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'esri/Graphic'")]),s._v("])\n"),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" points = {\n  "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("type")]),s._v(": "),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'point'")]),s._v(",\n    "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("longitude")]),s._v(": "),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'12.43234'")]),s._v(",\n    "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("latitude")]),s._v(": "),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'123.345123'")]),s._v(",\n    "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("spatialReference")]),s._v(": {\n    "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("wkid")]),s._v(": "),a("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("4490")]),s._v(" "),a("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 空间参考系数")]),s._v("\n  }\n}\n"),a("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 点-图片形式展现")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" pointsImg = "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" Graphic({\n  "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("geometry")]),s._v(": points,\n  "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("symbol")]),s._v(": {\n    "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("type")]),s._v(": "),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'picture-marker'")]),s._v(",\n    "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("url")]),s._v(": mySite,\n    "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("width")]),s._v(": "),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'22px'")]),s._v(",\n    "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("height")]),s._v(": "),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'22px'")]),s._v("\n  },\n  "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("attributes")]),s._v(": {} "),a("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 添加属性，在图层点击可以获取到点信息")]),s._v("\n})\ngraphicsLayers.add(pointsImg)\n"),a("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 点-自定义样式")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" pointGraphic = "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" Graphic({\n  "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("geometry")]),s._v(": points,\n  "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("symbol")]),s._v(": {\n    "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("type")]),s._v(": "),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'simple-marker'")]),s._v(", "),a("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// autocasts as new SimpleMarkerSymbol()")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("color")]),s._v(": ["),a("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("226")]),s._v(", "),a("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("119")]),s._v(", "),a("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("40")]),s._v("],\n    "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("outline")]),s._v(": {\n      "),a("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// autocasts as new SimpleLineSymbol()")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("color")]),s._v(": ["),a("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("255")]),s._v(", "),a("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("255")]),s._v(", "),a("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("255")]),s._v("],\n      "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("width")]),s._v(": "),a("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("2")]),s._v("\n    }\n  }\n})\n"),a("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 添加单个点")]),s._v("\ngraphicsLayers.add(pointGraphic)\n"),a("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 添加多个点")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" points = []\n"),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".drawDotLayer.graphics.addMany(points)\n")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("ol",{attrs:{start:"2"}},[t("li",[this._v("绘制线")])])},function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("pre",{pre:!0},[a("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" polyline = {\n  "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("type")]),s._v(": "),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'polyline'")]),s._v(",\n  "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("paths")]),s._v(": [\n    ["),a("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("-111.3")]),s._v(", "),a("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("52.68")]),s._v("],\n    ["),a("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("-98")]),s._v(", "),a("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("49.5")]),s._v("],\n    ["),a("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("-93.94")]),s._v(", "),a("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("29.89")]),s._v("]\n  ]\n}\n"),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" lineSymbol = {\n  "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("type")]),s._v(": "),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'simple-line'")]),s._v(",\n  "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("color")]),s._v(": ["),a("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("226")]),s._v(", "),a("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("119")]),s._v(", "),a("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("40")]),s._v("],\n  "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("width")]),s._v(": "),a("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("4")]),s._v("\n}\n"),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" lineAtt = {\n  "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("Name")]),s._v(": "),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'Keystone Pipeline'")]),s._v(",\n  "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("Owner")]),s._v(": "),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'TransCanada'")]),s._v(",\n  "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("Length")]),s._v(": "),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'3,456 km'")]),s._v("\n}\n"),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" polylineGraphic = "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" Graphic({\n  "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("geometry")]),s._v(": polyline,\n  "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("symbol")]),s._v(": lineSymbol,\n  "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("attributes")]),s._v(": lineAtt,\n  "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("popupTemplate")]),s._v(": {\n    "),a("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 使用arcgis弹框")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("title")]),s._v(": "),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'{Name}'")]),s._v(",\n    "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("content")]),s._v(": [\n      {\n        "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("type")]),s._v(": "),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'fields'")]),s._v(",\n        "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("fieldInfos")]),s._v(": [\n          {\n            "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("fieldName")]),s._v(": "),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'Name'")]),s._v("\n          },\n          {\n            "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("fieldName")]),s._v(": "),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'Owner'")]),s._v("\n          },\n          {\n            "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("fieldName")]),s._v(": "),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'Length'")]),s._v("\n          }\n        ]\n      }\n    ]\n  }\n})\ngraphicsLayers.add(polylineGraphic)\n")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("ol",{attrs:{start:"3"}},[t("li",[this._v("绘制面")])])},function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("pre",{pre:!0},[a("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" polygon = "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" Graphic({\n  "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("geometry")]),s._v(": {\n      "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("rings")]),s._v(": [], "),a("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 数组空间数据")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("spatialReference")]),s._v(": view.spatialReference,\n      "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("type")]),s._v(": "),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'polygon'")]),s._v("\n    },\n  "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("symbol")]),s._v(": {\n    "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("type")]),s._v(": "),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'simple-fill'")]),s._v(", "),a("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// autocasts as new SimpleFillSymbol()")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("style")]),s._v(": "),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'solid'")]),s._v(",\n    "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("color")]),s._v(": ["),a("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0")]),s._v(", "),a("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0")]),s._v(", "),a("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0")]),s._v(", "),a("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0.5")]),s._v("],\n    "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("outline")]),s._v(": { "),a("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 描边样式")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("style")]),s._v(": "),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'solid'")]),s._v(",\n      "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("color")]),s._v(": ["),a("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0")]),s._v(", "),a("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0")]),s._v(", "),a("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0")]),s._v("],\n      "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("width")]),s._v(": "),a("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0")]),s._v("\n    }\n  }\n})\ngraphicsLayers.add(polygon)\n")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("h3",{attrs:{id:"图层查询"}},[this._v("图层查询 "),t("a",{staticClass:"anchor",attrs:{href:"#图层查询"}},[this._v("#")])])},function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("pre",{pre:!0},[a("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[a("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("/**\n * 图层查询\n * "),a("span",{pre:!0,attrs:{class:"hljs-doctag"}},[s._v("@rings ")]),s._v("空间数据\n * "),a("span",{pre:!0,attrs:{class:"hljs-doctag"}},[s._v("@where ")]),s._v("数据库查询语句\n * */")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"hljs-function"}},[a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v(" "),a("span",{pre:!0,attrs:{class:"hljs-title"}},[s._v("spaceQuery")]),s._v("("),a("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v(" rings, where ")]),s._v(") ")]),s._v("{\n  "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" "),a("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("Promise")]),s._v("("),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("async")]),s._v(" (resolve, reject) => {\n    "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" [QueryTask, Query] = "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("await")]),s._v(" loadModules([\n      "),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'esri/tasks/QueryTask'")]),s._v(",\n      "),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'esri/tasks/support/Query'")]),s._v("\n    ])\n    "),a("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// url必须到具体图层序号")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" queryUrl = "),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("`"),a("span",{pre:!0,attrs:{class:"hljs-subst"}},[s._v("${GisBaseUrl}")]),s._v("/arcgis/rest/services/XXXXX/0`")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" qTask = "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" QueryTask({ "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("url")]),s._v(": queryUrl })\n    "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" query = "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" Query({\n      "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("returnGeometry")]),s._v(": "),a("span",{pre:!0,attrs:{class:"hljs-literal"}},[s._v("true")]),s._v(",\n      "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("outFields")]),s._v(": ["),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'*'")]),s._v("]\n    })\n    query.where = where\n    query.geometry = rings\n    "),a("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 空间参考信息")]),s._v("\n    query.outSpatialReference = "),a("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("4490")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 查询的标准，此处代表和geometry相交的图形都要返回")]),s._v("\n    query.spatialRelationship = Query.SPATIAL_REL_INTERSECTS\n    qTask.execute(query).then("),a("span",{pre:!0,attrs:{class:"hljs-function"}},[a("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("res")]),s._v(" =>")]),s._v(" {\n      resolve(res)\n    })\n  })\n}\n")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("h3",{attrs:{id:"GP基础服务"}},[this._v("GP基础服务 "),t("a",{staticClass:"anchor",attrs:{href:"#GP基础服务"}},[this._v("#")])])},function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("pre",{pre:!0},[a("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[a("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("/**\n * GP基础服务\n **/")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" gpUrl = "),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("`"),a("span",{pre:!0,attrs:{class:"hljs-subst"}},[s._v("${GisBaseUrl}")]),s._v("/arcgis/rest/services/Utilities/Geometry/GeometryServer`")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 两点之间间距离")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// segment 两个点经纬度")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"hljs-function"}},[a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v(" "),a("span",{pre:!0,attrs:{class:"hljs-title"}},[s._v("twoPointMeter")]),s._v(" ("),a("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("segment = []")]),s._v(") ")]),s._v("{\n  "),a("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 调用方法示例")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// twoPointMeter(")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// [[ '115.87534803236237', '28.684258476253564' ],[ '115.67828464305758', '28.676464475291823' ]]")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// ).then(res => {")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//   console.log('两点距离', res)")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// })")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" "),a("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("Promise")]),s._v("("),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("async")]),s._v(" (resolve, reject) => {\n    "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" [Polyline, LengthsParameters, GeometryService] = "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("await")]),s._v(" loadModules([\n      "),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'esri/geometry/Polyline'")]),s._v(", "),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'esri/tasks/support/LengthsParameters'")]),s._v(", "),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'esri/tasks/GeometryService'")]),s._v("\n    ])\n    "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" geoservice = "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" GeometryService(gpUrl)\n    "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" polyline = "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" Polyline({ "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("spatialReference")]),s._v(": "),a("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("4490")]),s._v(" })\n    polyline.addPath(segment)\n    "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" params = "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" LengthsParameters()\n    params.distanceUnit = GeometryService.UNIT_METER\n    params.calculationType = "),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'preserveShape'")]),s._v("\n    params.polylines = [polyline]\n    geoservice.lengths(params).then("),a("span",{pre:!0,attrs:{class:"hljs-function"}},[a("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("res")]),s._v(" =>")]),s._v(" {\n      "),a("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 返回单位：米（m）")]),s._v("\n      resolve(res.lengths["),a("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0")]),s._v("])\n    })\n  })\n}\n\n"),a("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 点缓冲半径公里-圆")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// point 中心点")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"hljs-function"}},[a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v(" "),a("span",{pre:!0,attrs:{class:"hljs-title"}},[s._v("nearby")]),s._v("("),a("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("point")]),s._v(") ")]),s._v("{\n  "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" "),a("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("Promise")]),s._v("("),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("async")]),s._v(" (resolve, reject) => {\n    "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" [BufferParameters, GeometryService] = "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("await")]),s._v(" loadModules([\n      "),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'esri/tasks/support/BufferParameters'")]),s._v(", "),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'esri/tasks/GeometryService'")]),s._v("\n    ])\n    "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" geometryService = "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" GeometryService(gpUrl)\n    "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" params = "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v("  BufferParameters()\n    params.unit = "),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'kilometers'")]),s._v("\n    params.distances =  ["),a("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1")]),s._v("]  "),a("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//半径")]),s._v("\n    params.geometries = [point.geometry]\n    params.geodesic = "),a("span",{pre:!0,attrs:{class:"hljs-literal"}},[s._v("true")]),s._v(";\n    params.bufferSpatialReference = "),a("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("4490")]),s._v("\n    params.outSpatialReference = "),a("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("4490")]),s._v("\n    geometryService.buffer(params).then("),a("span",{pre:!0,attrs:{class:"hljs-function"}},[a("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("res")]),s._v(" =>")]),s._v(" {\n      "),a("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 返回空间数据")]),s._v("\n      resolve(res)\n    })\n  })\n}\n")])])}],!1,null,null,null);n.options.__file="docs/api/gis.zh-CN.md";t.default=n.exports}}]);